<div class="px-4 py-5 my-5 text-center">
    <h1 class="display-5 fw-bold">Signup Here</h1>
    <% if (message.length > 0) { %>
        <div class="alert alert-danger"><%= message %></div>
    <% } %>
    <!-- show any messages that come back with authentication -->
    <div class="col-lg-3 mx-auto">
        <form action="/signup" method="post" onsubmit="return validateForm()">
            <section class="mb-2">
                <label for="username" class="form-label">Fullname</label>
                <input id="username" class="form-control" name="username" type="text" autocomplete="username" required>
            </section>
            <section class="mb-2">
                <label for="email" class="form-label">Email</label>
                <input id="email" class="form-control" name="email" type="email" autocomplete="email">
            </section>
            <section class="mb-2">
                <label for="new-password" class="form-label">Password</label>
                <input id="new-password" class="form-control"  name="password" type="password" autocomplete="new-password" required>
            </section>
            <section class="mb-2">
                <label for="confirm-password" class="form-label">Confirm Password</label>
                <input id="confirm-password" class="form-control"  name="confirmPassword" type="password" autocomplete="new-password" required>
                <span id="passwordError" class="text-danger"></span>
            </section>
            <button type="submit" class="btn btn-primary mt-2">Sign up</button>
            <p class="mb-2">Already have an account? <a href="/login">Login</a></p>
        </form>
    </div>
</div>

<script>
    function validateEmail(email) {
    var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(String(email).toLowerCase());
    }
    function validateForm() {
    var email = document.getElementById("email").value;
    var password = document.getElementById("new-password").value;
    var confirmPassword = document.getElementById("confirm-password").value;
    var passwordError = document.getElementById("passwordError");
    
    if (password != confirmPassword) {
        passwordError.textContent = "Passwords do not match.";
        return false;
    } else if (!validateEmail(email)) {
        passwordError.textContent = "Invalid email format.";
        return false;
    }
    passwordError.textContent = "";
    return true;
}
</script>